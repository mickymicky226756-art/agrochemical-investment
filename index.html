<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agro-Chem Invest - Investment Platform</title>
    
    <style>
        /* ·ä†·å†·âÉ·àã·ã≠ ·ã®·åà·åΩ ·çé·à≠·àõ·âµ */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #e9f5e9;
        }
        
        /* ·ã® Login/Register ·åà·åΩ ·åÄ·à≠·â£ */
        .login-register-page {
            background-image: linear-gradient(135deg, #1e5a2c 0%, #387c38 100%); 
            display: flex; 
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            width: 100%;
            position: fixed; 
            top: 0;
            left: 0;
            z-index: 10;
        }

        .container {
            background-color: #ffffff;
            padding: 30px 40px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        h1 {
            color: #1e5a2c;
            margin-bottom: 5px;
        }

        p {
            color: #555;
            margin-bottom: 20px;
        }

        /* Tab Buttons Style */
        .tab-buttons {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .tab-buttons button {
            padding: 12px 20px;
            border: none;
            background-color: #f0f0f0;
            color: #555;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s, color 0.3s;
            flex-grow: 1;
        }
        
        .tab-buttons button.active {
            background-color: #387c38;
            color: white;
        }

        .form-box {
            display: none; 
        }

        .form-box.active {
            display: block; 
        }

        .input-group {
            text-align: left;
            margin-bottom: 10px; 
        }

        .input-group label {
            display: block;
            margin-bottom: 3px; 
            font-weight: bold;
            font-size: 14px; 
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box; 
            font-size: 15px;
        }
        
        /* ·ä†·ã≤·àµ ·àµ·â≥·ã≠·àç: ·àà Register ·âÅ·àç·çç ·ä•·äì Referral Input ·åé·äï ·àà·åé·äï ·ä•·äï·ã≤·àÜ·äë */
        .input-group-half {
            display: flex;
            gap: 10px; /* ·â† Input ·ä•·äì Button ·àò·ä´·ä®·àç ·ä≠·çç·â∞·âµ ·àà·àò·çç·å†·à≠ */
            align-items: flex-end; /* ·âÅ·àç·çâ ·ä®·â≥·âΩ ·ä•·äï·ã≤·à∞·àà·çç */
            margin-bottom: 10px;
        }
        .input-group-half .input-group {
            flex-grow: 1;
            margin-bottom: 0; /* ·ãµ·à≠·â• margin ·ä•·äï·ã≥·ã≠·àÜ·äï */
        }
        .input-group-half .submit-btn-register {
            width: 150px; /* ·àà Register ·âÅ·àç·çç ·àµ·çã·âµ ·àò·àµ·å†·âµ */
            padding: 10px 14px;
            font-size: 16px;
            margin-top: 0; /* ·ä®·àã·ã≠ ·ã´·àà·ãç margin ·ä•·äï·ã≤·å†·çã */
        }
        /* ·ã®·åé·äï ·àà·åé·äï ·âÖ·åπ ·ãç·àµ·å• ·ä´·àç·àÜ·äê submit-btn ·àô·àâ ·àµ·çã·âµ ·ä•·äï·ã≤·ã≠·ãù */
        .form-box .submit-btn:not(.submit-btn-register) {
            width: 100%;
            padding: 14px;
            font-size: 18px;
            margin-top: 18px; 
        }

        .submit-btn {
            background-color: #1e5a2c;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
        }
        .submit-btn:active {
            transform: translateY(1px);
        }

        .submit-btn:hover {
            background-color: #387c38;
        }

        .message {
            margin-top: 10px; 
            font-weight: bold;
        }

        .success {
            color: #4CAF50; 
        }

        .error {
            color: #f44336; 
        }

        /* ***** Dashboard Style ***** */
        .dashboard-page {
            display: none; 
            width: 100%;
            max-width: 1000px;
            background-color: #ffffff;
            padding: 20px 40px 80px 40px; 
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15); 
            text-align: center;
            position: relative; 
            box-sizing: border-box; 
        }

        /* [ADMIN-FEATURE] Admin Dashboard Style */
        .admin-dashboard-page {
            display: none;
            width: 100%;
            max-width: 1200px; /* ·à∞·çã ·ã´·àà ·åà·åΩ */
            background-color: #f9f9f9;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        .admin-header {
            text-align: left;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #387c38;
        }
        .admin-header h2 {
            color: #f44336;
            margin: 0;
        }
        .admin-transaction-list {
            margin-top: 20px;
            text-align: left;
        }
        .admin-transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .admin-transaction-info {
            flex-grow: 1;
            padding-right: 20px;
        }
        .admin-transaction-info p {
            margin: 3px 0;
            font-size: 14px;
        }
        .admin-actions button {
            padding: 8px 15px;
            margin-left: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .admin-actions .approve-btn {
            background-color: #4CAF50;
            color: white;
        }
        .admin-actions .approve-btn:hover {
            background-color: #387c38;
        }
        .admin-actions .reject-btn {
            background-color: #f44336;
            color: white;
        }
        .admin-actions .reject-btn:hover {
            background-color: #d32f2f;
        }
        .admin-logout-btn {
            background-color: #555;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
        }
        .admin-logout-btn:hover {
            background-color: #333;
        }
        
        /* Bottom Navigation Bar Style (·ä†·àç·â∞·äê·ä´·àù) */
        .bottom-navbar {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: #1e5a2c; 
            padding: 10px 0;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
            box-sizing: border-box;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
            z-index: 20;
        }
        
        .bottom-navbar button {
            background: none;
            border: none;
            color: #c8e6c9;
            font-size: 14px;
            font-weight: 500;
            padding: 8px 10px;
            cursor: pointer;
            transition: color 0.3s, background-color 0.3s;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .bottom-navbar button:hover {
            color: white; 
        }
        
        .bottom-navbar button.nav-active {
            color: #FFEB3B; 
        }
        
        /* Icons (·àà·àô·ä®·à´ ·ã´·àÖ·àç) */
        .bottom-navbar button::before {
            content: '';
            font-size: 20px;
            margin-bottom: 3px;
            font-family: Arial, sans-serif; 
        }
        #nav-home::before { content: 'üè†'; }
        #nav-investment::before { content: 'üìà'; }
        #nav-account::before { content: 'üë§'; }
        #nav-team::before { content: 'üë•'; }
        
        /* ***** ·ã®·åà·åΩ ·ã≠·ãò·â∂·âΩ (Content Sections) ***** */
        .page-content {
            display: none;
            animation: fadeIn 0.5s;
            padding-bottom: 20px; 
            text-align: left;
        }
        
        .page-content.active {
            display: block;
        }
        
        /* [ADMIN-FEATURE] Transaction Status Colors */
        .status-Pending { color: #ff9800; font-weight: bold; }
        .status-Completed { color: #4CAF50; font-weight: bold; }
        .status-Rejected { color: #f44336; font-weight: bold; }
        
        /* ·ã®·â∞·âÄ·à©·âµ ·àµ·â≥·ã≠·àé·âΩ ·ä†·àç·â∞·äê·ä©·àù */
        .header {
            display: flex;
            justify-content: start; 
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        /* Home Page Cards and Buttons */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .info-card {
            padding: 25px; 
            border-radius: 15px; 
            text-align: left;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }
        .balance-card { background-color: #e8f5e9; border: 1px solid #c8e6c9; }
        .profit-card { background-color: #fff3e0; border: 1px solid #ffe0b2; }
        .info-card h2 { color: #555; font-size: 18px; margin-top: 0; margin-bottom: 5px; }
        .amount-display { font-size: 38px; font-weight: 900; color: #1e5a2c; margin: 0; }
        .profit-amount-display { color: #ff9800; }
        .action-buttons { display: flex; gap: 20px; margin-bottom: 40px; justify-content: center; }
        .action-buttons button { padding: 15px 40px; font-size: 17px; border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.3s, transform 0.1s; font-weight: bold; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); flex-grow: 1; max-width: 300px; }
        #deposit-btn { background-color: #4CAF50; color: white; }
        #deposit-btn:hover { background-color: #387c38; }
        #withdraw-btn { background-color: #f44336; color: white; }
        #withdraw-btn:hover { background-color: #d32f2f; }
        
        
        /* Deposit/Withdraw Forms (·ä†·àç·â∞·äê·ä©·àù) */
        #deposit-form-content, #withdraw-form-content {
            padding: 20px;
            background-color: #f7fcf7;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* Account Buttons (·ä†·àç·â∞·äê·ä©·àù) */
        .account-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 350px;
            margin: 0 auto;
        }
        .account-buttons button {
            padding: 15px 20px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            color: white; 
        }

        #customer-service-btn { background-color: #008CBA; }
        #customer-service-btn:hover { background-color: #007bb5; }
        #transaction-history-btn { background-color: #FF9800; }
        #transaction-history-btn:hover { background-color: #e68900; }
        #change-password-btn { background-color: #387c38; }
        #change-password-btn:hover { background-color: #1e5a2c; }
        #logout-btn-account { background-color: #f44336; }
        #logout-btn-account:hover { background-color: #d32f2f; }
        
        /* Investment Page Styles */
        .plan-grid {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap; 
            justify-content: center;
        }
        .plan-button {
            background-color: #f7fcf7;
            border: 2px solid #387c38;
            border-radius: 15px;
            padding: 20px;
            width: 100%;
            max-width: 200px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .plan-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            background-color: #e8f5e9;
        }
        .plan-button h4 {
            color: #1e5a2c;
            font-size: 20px;
            margin-top: 0;
            margin-bottom: 15px;
        }
        .plan-button .plan-details p {
            margin: 5px 0;
            color: #555;
            font-size: 15px;
        }
        .plan-button .daily-rate {
            font-size: 18px;
            font-weight: bold;
            color: #ff9800;
            margin-top: 10px;
        }
    </style>

        <!-- Firebase (compat CDN) -->
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>
        <script>
                // Firebase configuration (from user-provided config)
                const firebaseConfig = {
                    apiKey: "AIzaSyCa9NqS9LdL0FvdYoCWuSbCzvrmgPJ_fHs",
                    authDomain: "agrochem-investment.firebaseapp.com",
                    projectId: "agrochem-investment",
                    storageBucket: "agrochem-investment.firebasestorage.app",
                    messagingSenderId: "936499881703",
                    appId: "1:936499881703:web:de12906c7a29ed5f962442",
                    measurementId: "G-LNT6Q7LWKL"
                };

                // Initialize Firebase (compat)
                try {
                    firebase.initializeApp(firebaseConfig);
                    // analytics may not be available in some environments
                    try { firebase.analytics(); } catch (e) { /* ignore */ }

                    // Expose Firestore DB globally so existing inline scripts can use it: window.db
                    window.db = firebase.firestore();

                    // Simple collection refs for convenience
                    window.dbRef = {
                        users: window.db.collection('users'),
                        transactions: window.db.collection('transactions')
                    };
                } catch (err) {
                    console.error('Firebase init error:', err);
                }
        </script>

</head>
<body>

    <div id="login-register-area" class="login-register-page">
        <div class="container">
            <h1>Agro-Chem Invest</h1>
            <p>·â†·åç·â•·à≠·äì ·ä¨·àö·ä´·àç ·ä¢·äï·â®·àµ·âµ ·â†·àõ·ãµ·à®·åç ·â†·ã®·âÄ·äë ·âµ·à≠·çç·ãé·äï ·ã´·åç·äô!</p>

            <div class="tab-buttons">
                <button id="login-tab" class="active">Login</button>
                <button id="register-tab">Register</button>
            </div>

            <form id="login-form" class="form-box active">
                <h2>Login</h2>
                <div class="input-group">
                    <label for="login-identifier">·àµ·àç·ä≠ ·âÅ·å•·à≠ (·àà·â∞·å†·âÉ·àö) / Admin ID (·àà·ä†·ãµ·àö·äï):</label>
                    <input type="text" id="login-identifier" required>
                </div>
                <div class="input-group">
                    <label for="login-password">·ã®·ã≠·àà·çç ·âÉ·àç / Password:</label>
                    <input type="password" id="login-password" required>
                </div>
                <button type="submit" class="submit-btn">Login</button>
                <p class="message" id="login-message"></p>
                <p style="margin-top: 20px; font-size: 14px;">
                    ·àò·àà·ã´ ·ã®·àà·ãé·âµ·àù? 
                    <a href="#" id="go-to-register" style="color: #387c38; font-weight: bold; text-decoration: none;">·ä•·ãö·àÖ ·ã≠·àò·ãù·åà·â°</a>
                </p>
            </form>

            <form id="register-form" class="form-box">
                <h2>Register</h2>
                <div class="input-group">
                    <label for="register-name">·àô·àâ ·àµ·àù / Full Name:</label>
                    <input type="text" id="register-name" required>
                </div>
                <div class="input-group">
                    <label for="register-phone">·àµ·àç·ä≠ ·âÅ·å•·à≠ / Phone Number:</label>
                    <input type="tel" id="register-phone" required pattern="[0-9]{10,15}" title="·àµ·àç·ä≠ ·âÅ·å•·à≠·ãé·äï ·â†·âµ·ä≠·ä≠·àç ·ã´·àµ·åà·â°">
                </div>
                <div class="input-group">
                    <label for="register-password">·ã®·ã≠·àà·çç ·âÉ·àç / Password (·â¢·ã´·äï·àµ 6 ·çä·ã∞·àç):</label>
                    <input type="password" id="register-password" required minlength="6">
                </div>
                <div class="input-group">
                    <label for="register-confirm-password">·ã®·ã≠·àà·çç ·âÉ·àç ·àõ·à®·åã·åà·å´ / Confirm Password:</label>
                    <input type="password" id="register-confirm-password" required minlength="6">
                </div>
                
                <div class="input-group-half">
                    <div class="input-group">
                        <label for="register-referral">Referral Code (·ä†·àµ·çà·àã·åä ·ä†·ã≠·ã∞·àà·àù):</label>
                        <input type="text" id="register-referral"> 
                    </div>
                    <button type="submit" class="submit-btn submit-btn-register">Register</button>
                </div>
                
                <p class="message" id="register-message"></p>
                <p style="margin-top: 20px; font-size: 14px;">
                    ·àò·àà·ã´ ·ä†·àà·ãé·âµ? 
                    <a href="#" id="go-to-login" style="color: #387c38; font-weight: bold; text-decoration: none;">Login ·ã´·ãµ·à≠·åâ</a>
                </p>
            </form>
        </div>
    </div>
    
    <div id="dashboard-area" class="dashboard-page">
        
        
        <div class="header">
            <h2 style="color: #1e5a2c;"><span id="user-name">·ä•·äï·ä≥·äï ·ã∞·àÖ·äì ·àò·å°! ·ä†·â∂/·ãà·ã≠·ãò·àÆ ·â£·àà·àÄ·â•·âµ</span></h2>
        </div>

        <div id="home-content" class="page-content active">
            
            <div class="main-home-content" id="main-home-content-div">
                <div class="stats-grid">
                    <div class="info-card balance-card">
                        <h2>·å†·âÖ·àã·àã ·âÄ·à™ ·àÇ·à≥·â• / Total Balance</h2>
                        <p class="amount-display">ETB <span id="current-balance">50.00</span></p> 
                        <small style="color: #00796b;">·ã≠·àÖ 50 ETB ·ã®·ä•·à≠·àµ·ãé ·ã®·àò·àò·ãù·åà·â¢·ã´ ·â¶·äê·àµ ·äê·ãç·ç¢</small>
                    </div>
                    <div class="info-card profit-card">
                        <h2>·å†·âÖ·àã·àã ·ã®·ä¢·äï·â®·àµ·âµ·àò·äï·âµ ·àò·å†·äï</h2>
                        <p class="amount-display profit-amount-display">ETB <span id="total-invested-amount">0.00</span></p>
                        <small style="color: #ff9800;">·ãï·àà·â≥·ãä ·âµ·à≠·çç ·ã®·àö·à∞·àã·ãç ·ä®·åà·â£·ãç ·ä¢·äï·â®·àµ·âµ·àò·äï·âµ ·äê·ãç·ç¢</small>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="deposit-btn">üí∞ ·åà·äï·ãò·â• ·àõ·àµ·åà·â¢·ã´ (Deposit)</button>
                    <button id="withdraw-btn">üí∏ ·åà·äï·ãò·â• ·àõ·ãç·å´ (Withdraw)</button>
                </div>

                <div class="about-section">
                    <h3>üå± ·àµ·àà ·ä†·åç·àÆ-·ä¨·àö·ä´·àç ·ä¢·äï·â®·àµ·âµ·àò·äï·âµ ·ä•·äì ·ä†·ãã·å≠·äê·â±</h3>
                    <p>·ã® **·ä†·åç·àÆ-·ä¨·àö·ä´·àç ·ä¢·äï·â®·àµ·âµ·àò·äï·âµ** ·ãò·à≠·çç ·â†·ãò·àò·äì·ãä ·åç·â•·à≠·äì ·ãç·àµ·å• ·â†·å£·àù ·çà·å£·äï ·ãï·ãµ·åà·âµ ·ä•·ã´·à≥·ã® ·ã´·àà ·ãà·à≥·äù ·ä¢·äï·ã±·àµ·âµ·à™ ·äê·ãç·ç¢ ·àõ·ã≥·â†·à™·ã´·ãé·âΩ·ç£ ·çÄ·à®-·â∞·â£·ã≠ ·àò·ãµ·äÉ·äí·â∂·âΩ ·ä•·äì ·ã®·ä•·ãµ·åà·âµ ·àò·âÜ·å£·å†·à™·ã´ ·ä¨·àö·ä´·àé·âΩ ·ã®·àù·à≠·âµ ·â•·ä≠·äê·âµ·äï ·â†·àò·âÄ·äê·àµ·ç£ ·ã®·à∞·â•·àç ·å•·à´·âµ·äï ·â†·àõ·à≥·ã∞·åç ·ä•·äì ·ã®·àù·åç·â• ·ãã·àµ·âµ·äì·äï ·â†·àõ·à®·åã·åà·å• ·ã®·ãì·àà·àõ·âΩ·äï·äï ·ã®·àù·åç·â• ·çç·àã·åé·âµ ·àà·àõ·à≠·ä´·âµ ·âÅ·àç·çç ·àö·äì ·ã≠·å´·ãà·â≥·àâ·ç¢</p>

                    <p><strong>·àà·àù·äï ·ä¢·äï·â®·àµ·âµ ·àõ·ãµ·à®·åç ·ä†·àà·â•·ãé·âµ?</strong> ·ã®·ãì·àà·àù ·àï·ãù·â• ·âÅ·å•·à≠ ·ãï·ãµ·åà·âµ ·ä•·äì ·ã®·ä†·ã®·à≠ ·äï·â•·à®·âµ ·àà·ãç·å• ·àà·åç·â•·à≠·äì ·ãò·à≠·çç ·ã®·â¥·ä≠·äñ·àé·åÇ ·çç·àã·åé·âµ·äï ·å®·àù·àØ·àç·ç¢ ·â†·ãö·àÖ·àù ·àù·ä≠·äï·ã´·âµ ·ã®·åç·â•·à≠·äì ·ä¨·àö·ä´·àé·âΩ ·çç·àã·åé·âµ ·â†·ã®·ãì·àò·â± ·ä•·ã´·ã∞·åà ·äê·ãç·ç¢ ·ã®·ä•·äõ ·àò·ãµ·à®·ä≠ ·â£·àà·àÄ·â•·â∂·âΩ·äï ·ä®·ãö·àÖ ·ãò·à≠·çç ·åã·à≠ ·â†·àõ·àµ·â∞·à≥·à∞·à≠ ·åà·äï·ãò·â•·ãé ·â†·â∞·å®·â£·å≠ ·à•·à´ ·àã·ã≠ ·ä•·äï·ã≤·ãç·àç ·ã´·ã∞·à≠·åã·àç·ç¢</p>
                    
                    <p><strong>·ã®·ä•·äõ ·àç·ã©·äê·âµ:</strong> ·ä¢·äï·â®·àµ·âµ·àò·äï·âµ·ãé ·â†·äÉ·àã·çä·äê·âµ ·â†·â∞·àû·àã·â†·âµ ·àò·äï·åà·ãµ ·â†·ãò·à≠·çâ ·àã·ã≠ ·ä•·äï·ã≤·ãç·àç ·ä•·äì·à®·åã·åç·å£·àà·äï·ç¢ ·ä®·àÅ·àâ·àù ·â†·àã·ã≠·ç£ ·àà·â£·àà·àÄ·â•·â∂·âª·âΩ·äï ·â†·ã®·âÄ·äë **·ä®·çç·â∞·äõ ·ä•·äì ·ã®·â∞·à®·åã·åã ·âµ·à≠·çç** ·ä•·äï·ã≤·ã´·åà·äô ·ã®·àö·ã´·àµ·âΩ·àç ·ä†·àµ·â∞·àõ·àõ·äù ·ã®·àò·ãã·ãï·àà ·äï·ãã·ã≠ ·àò·ãµ·à®·ä≠·äï ·ä•·äï·çà·å•·à´·àà·äï·ç¢ ·åà·äï·ãò·â•·ãé ·ãù·àù ·â•·àé ·ä†·ã≠·âÄ·àò·å•·àù·ç§ ·ã≠·à†·à´·àç!</p>
                </div>
            </div>
            
            <div class="deposit-page-content" id="deposit-page-content-div">
                <button id="back-to-home-from-deposit-btn" style="float: left; background: #f0f0f0; border: 1px solid #ccc; padding: 10px; border-radius: 5px; cursor: pointer; margin-bottom: 15px;">üîô ·ãà·ã∞ Home ·â∞·àò·àà·àµ</button>
                <div style="clear: both;"></div>

                <div id="deposit-form-content">
                    <h3>üíµ ·åà·äï·ãò·â• ·àà·àõ·àµ·åà·â£·âµ ·ã®·àö·ã´·àµ·çà·àç·åâ ·àò·à®·åÉ·ãé·âΩ (Deposit)</h3>
                    
                    <div class="payment-info">
                        <p>·åà·äï·ãò·â•·ãé·äï ·ä®·â≥·âΩ ·â†·â∞·å†·âÄ·à±·âµ ·ã®·ä≠·çç·ã´ ·àò·äï·åà·ã∂·âΩ ·àã·ã≠ ·ã´·àµ·åà·â°:</p>
                        <p>üè¶ **CBE ·ä†·ä´·ãç·äï·âµ:** <strong>1000413223133</strong> (·àµ·àù: Mikiyas)</p>
                        <p>üì± **Telebirr:** <strong>0942945499</strong> (·àµ·àù: Mikiyas)</p>
                        <p style="margin-top: 10px; color: #ff9800; font-weight: bold;">·åà·äï·ãò·â• ·ä´·àµ·åà·â° ·â†·äã·àã **Transaction ID (·ã®·ãù·ãç·ãç·à≠ ·âÅ·å•·à≠)** ·àò·àò·ãù·åà·â•·ãé·äï ·ä†·ã≠·à≠·à±!</p>
                    </div>

                    <form id="deposit-form">
                        <div class="input-group">
                            <label for="deposit-amount">·ã®·åà·äï·ãò·â• ·àò·å†·äï (Amount) - ·â†ETB:</label>
                            <input type="number" id="deposit-amount" min="500" placeholder="·â¢·ã´·äï·àµ 500 ETB" required>
                        </div>
                        <div class="input-group">
                            <label for="transaction-id">Transaction ID (·ã®·ãù·ãç·ãç·à≠ ·âÅ·å•·à≠):</label>
                            <input type="text" id="transaction-id" placeholder="·àà·àù·à≥·àå: AB12345678" required>
                        </div>
                        
                        <button type="submit" id="deposit-submit-btn" class="submit-btn">‚úÖ Deposit ·å•·ã´·âÑ ·ä†·àµ·åà·â£</button>
                        <p class="message deposit-message" id="deposit-form-message"></p>
                    </form>
                </div>
            </div>
            
            <div class="withdraw-page-content" id="withdraw-page-content-div">
                <button id="back-to-home-from-withdraw-btn" style="float: left; background: #f0f0f0; border: 1px solid #ccc; padding: 10px; border-radius: 5px; cursor: pointer; margin-bottom: 15px;">üîô ·ãà·ã∞ Home ·â∞·àò·àà·àµ</button>
                <div style="clear: both;"></div>

                <div id="withdraw-form-content">
                    <h3>üí∏ ·åà·äï·ãò·â• ·àõ·ãç·å´ (Withdraw)</h3>
                    
                    <p style="text-align: center; color: #f44336; font-weight: bold;">·â¢·ã´·äï·àµ 100 ETB ·àõ·ãç·å£·âµ ·ã≠·âΩ·àã·àâ·ç¢</p>

                    <form id="withdraw-form">
                        <div class="input-group">
                            <label for="withdraw-bank-name">·ã®·â£·äï·ä≠ ·àµ·àù:</label>
                            <select id="withdraw-bank-name" required>
                                <option value="">--- ·ã®·â£·äï·ä≠ ·àµ·àù ·ã≠·àù·à®·å° ---</option>
                                <option value="CBE">Commercial Bank of Ethiopia (CBE)</option>
                                <option value="Awash">Awash Bank</option>
                                <option value="Dashen">Dashen Bank</option>
                                <option value="Abyssinia">Bank of Abyssinia</option>
                                <option value="Telebirr">Telebirr</option>
                                <option value="Other">·àå·àã (Other)</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="withdraw-full-name">·ã®·â£·àà·â§·â± ·àô·àâ ·àµ·àù (Name of Account Holder):</label>
                            <input type="text" id="withdraw-full-name" placeholder="·àô·àâ ·àµ·àù" required>
                        </div>
                        
                        <div class="input-group">
                            <label for="withdraw-account-number">·ã®·ä†·ä´·ãç·äï·âµ / ·àµ·àç·ä≠ ·âÅ·å•·à≠:</label>
                            <input type="text" id="withdraw-account-number" placeholder="·ã®·â£·äï·ä≠ ·ä†·ä´·ãç·äï·âµ ·âÅ·å•·à≠ ·ãà·ã≠·àù Telebirr ·âÅ·å•·à≠" required>
                        </div>
                        <div class="input-group">
                            <label for="withdraw-amount">·ã®·åà·äï·ãò·â• ·àò·å†·äï (Amount) - ·â†ETB:</label>
                            <input type="number" id="withdraw-amount" min="100" placeholder="·â¢·ã´·äï·àµ 100 ETB" required>
                        </div>
                        
                        <button type="submit" id="withdraw-submit-btn" class="submit-btn">‚úÖ Withdraw ·å•·ã´·âÑ ·ä†·àµ·åà·â£</button>
                        <p class="message withdraw-message" id="withdraw-form-message"></p>
                    </form>
                </div>
            </div>
            
        </div>
        
        <div id="investment-content" class="page-content">
            <div class="investment-plans">
                <h3>üí∞ ·ã®·ä¢·äï·â®·àµ·âµ·àò·äï·âµ ·ãï·âÖ·ã∂·âΩ ·ä•·äì ·å•·âÖ·àõ ·å•·âÖ·àû·âΩ</h3>
                
                <div class="plan-grid" id="plan-grid-list">
                    
                    <button class="plan-button" id="plan-1-btn" data-plan="Basic" data-min="500" data-max="4999" data-rate="7" data-days="40">
                        <h4>Plan 1: ·àò·à†·à®·â≥·ãä (Basic)</h4>
                        <div class="plan-details">
                            <p>·àò·å†·äï: <strong>ETB 500 - 4,999</strong></p>
                            <p>·åä·ãú: <strong>40 ·âÄ·äì·âµ</strong></p>
                            <p class="daily-rate">·ãï·àà·â≥·ãä ·âµ·à≠·çç: 7%</p>
                        </div>
                    </button>

                    <button class="plan-button" id="plan-2-btn" data-plan="Standard" data-min="5000" data-max="9999" data-rate="8" data-days="70">
                        <h4>Plan 2: ·àò·ä´·ä®·àà·äõ (Standard)</h4>
                        <div class="plan-details">
                            <p>·àò·å†·äï: <strong>ETB 5,000 - 9,999</strong></p>
                            <p>·åä·ãú: <strong>70 ·âÄ·äì·âµ</strong></p>
                            <p class="daily-rate">·ãï·àà·â≥·ãä ·âµ·à≠·çç: 8%</p>
                        </div>
                    </button>

                    <button class="plan-button" id="plan-3-btn" data-plan="Premium" data-min="10000" data-max="1000000" data-rate="9" data-days="100">
                        <h4>Plan 3: ·ãã·äì (Premium)</h4>
                        <div class="plan-details">
                            <p>·àò·å†·äï: <strong>ETB 10,000+</strong></p>
                            <p>·åä·ãú: <strong>100 ·âÄ·äì·âµ</strong></p>
                            <p class="daily-rate">·ãï·àà·â≥·ãä ·âµ·à≠·çç: 9%</p>
                        </div>
                    </button>
                </div>
                
                <div class="purchase-form-box" id="purchase-form-box">
                    <button id="back-to-plans-btn" style="float: right; background: #ccc; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-weight: bold;">‚ùå</button>
                    <h4>
                        <span id="selected-plan-name">Selected Plan</span> ·åç·ã¢
                    </h4>
                    
                    <p style="text-align: center; font-size: 15px;">
                        ·ã®·ä•·à≠·àµ·ãé ·âÄ·à™ ·àÇ·à≥·â•: <strong>ETB <span id="current-balance-purchase">50.00</span></strong>
                    </p>
                    <p id="plan-info-display" style="text-align: center; color: #387c38; font-weight: bold;"></p>

                    <form id="purchase-form">
                        <div class="input-group">
                            <label for="purchase-amount">·ã®·ä¢·äï·â®·àµ·âµ·àò·äï·âµ ·àò·å†·äï (Amount) - ·â†ETB:</label>
                            <input type="number" id="purchase-amount" required>
                        </div>
                        
                        <button type="submit" id="purchase-submit-btn" class="submit-btn">‚úÖ BUY / ·åç·ãõ</button>
                        <p class="message" id="purchase-form-message" style="text-align: center;"></p>
                    </form>
                </div>
                
                <div class="my-investments-section" style="margin-top: 40px; text-align: center;">
                    <h3>·ä•·à≠·àµ·ãé ·ã®·åà·ãô·ãã·â∏·ãç ·ä¢·äï·â®·àµ·âµ·àò·äï·â∂·âΩ</h3>
                    <div id="investment-list-display" style="border: 1px solid #ccc; border-radius: 8px; padding: 15px; background-color: white; min-height: 50px; text-align: left;">
                        <p style="text-align: center; color: #555;">·åà·äì ·àù·äï·àù ·ä¢·äï·â®·àµ·âµ ·ä†·àã·ã∞·à®·åâ·àù·ç¢</p>
                    </div>
                </div>

            </div>
        </div>
        
        <div id="account-content" class="page-content other-page">
            <h3>üë§ ·ã®·äî ·àò·àà·ã´ (My Account)</h3>
            <div class="account-details">
                <p>·ã≠·àÖ ·åà·åΩ ·ã®·ä•·à≠·àµ·ãé·äï ·ã®·åç·àç ·àò·à®·åÉ·ãé·âΩ (·àµ·àç·ä≠ ·âÅ·å•·à≠·ç£ ·ã®·ã≠·àà·çç ·âÉ·àç ·àò·âÄ·ã®·à≠·ã´ ·ãà·ãò·â∞) ·ã≠·ã≠·ãõ·àç·ç¢</p>
                <p><strong>·ã®·àò·àà·ã´ ·àò·à®·åÉ·ç°</strong> <span id="account-info">·àµ·àç·ä≠: 09... | ·àô·àâ ·àµ·àù: ...</span></p>
            </div>
            
            <div class="account-buttons">
                
                <button id="customer-service-btn" type="button">üìû Customer Service (·ã®·ã∞·äï·â†·äõ ·ä†·åà·àç·åç·àé·âµ)</button>

                <button id="transaction-history-btn" type="button">üßæ Transaction History (·ã®·ãù·ãç·ãç·à≠ ·â≥·à™·ä≠)</button>

                <button id="change-password-btn" type="button">üîë ·ã®·ã≠·àà·çç ·âÉ·àç ·âÄ·ã≠·à≠ (Change Password)</button>
                
                <button id="logout-btn-account" type="button">üö™ Logout (·ãç·å£)</button>
            </div>
            <p class="message" id="history-message" style="margin-top: 20px; text-align: center;"></p>
        </div>
        
        <div id="team-content" class="page-content other-page">
            <h3>üë• My Team (·ã®·à™·çà·à´·àç ·åà·åΩ)</h3>
            
            <div class="referral-box">
                <h4>üéâ ·åì·ã∞·äõ·ãé·äï ·ã≠·åã·â•·ãô ·ä•·äì ·â∞·å®·àõ·à™ ·åà·â¢ ·ã´·åç·äô!</h4>
                <p>·ã®·ä•·à≠·àµ·ãé·äï **Referral Code** ·ãà·ã≠·àù **Login Link** ·â∞·å†·âÖ·àò·ãç ·åì·ã∞·äõ·ãé·äï ·ã´·àµ·àò·ãù·åç·â°·ç¢</p>
                
                <div style="margin-bottom: 20px;">
                    <strong style="color: #555;">·ã®·ä•·à≠·àµ·ãé Referral Code:</strong>
                    <div class="referral-info">
                        <span id="referral-code-display" class="referral-code-display">ABC123</span>
                        <button id="copy-code-btn" class="copy-btn">·âÖ·ã≥</button>
                    </div>
                </div>

                <div>
                    <strong style="color: #555;">·ã®·ä•·à≠·àµ·ãé ·ã®·àò·àò·ãù·åà·â¢·ã´ ·àä·äï·ä≠:</strong>
                    <div class="referral-info">
                        <span id="referral-link-display" class="referral-link-display">http://agrocheminvest.com/register?ref=ABC123</span>
                        <button id="copy-link-btn" class="copy-btn">·âÖ·ã≥</button>
                    </div>
                </div>
                
                <p style="margin-top: 20px; font-weight: bold;">·å†·âÖ·àã·àã ·â°·ãµ·äï ·ä†·â£·àã·âµ: <span id="team-size-display">0</span></p>
            </div>
            
            <div class="commission-rules">
                <h4>üìú ·ã®·à™·çà·à´·àç ·äÆ·àö·àΩ·äï ·àÖ·åç</h4>
                <p>‚úÖ **·ã®·àò·åÄ·àò·à™·ã´ ·åã·â£·ã• ·â¶·äê·àµ (Level 1 Bonus):** ·â†·à™·çà·à´·àç ·àä·äï·ä≠·ãé ·ã®·â∞·àò·ãò·åà·â† ·à∞·ãç ·â†·ä´·çí·â≥·àç ·ä¢·äï·â®·àµ·âµ ·à≤·åÄ·àù·à≠ **80 ETB** ·ãà·ã≤·ã´·ãç·äë ·ãà·ã∞ ·ä†·ä´·ãç·äï·âµ·ãé ·åà·â¢ ·ã≠·ã∞·à®·åã·àç·ç¢</p>
                <p>üìà **·ã®·ãï·àà·â≥·ãä ·âµ·à≠·çç ·äÆ·àö·àΩ·äï:** ·â†·à≠·àµ·ãé ·ã®·â∞·åã·â†·ãò·ãç ·à∞·ãç (Level 1) ·â†·ã®·âÄ·äë ·ä®·àö·ã´·åà·äò·ãç ·âµ·à≠·çç ·àã·ã≠ **20%** ·ã≠·à∞·å•·ãé·â≥·àç·ç¢</p>
                <p style="margin-top: 10px; font-weight: bold; color: #1e5a2c;">·ã≠·àÖ ·âµ·à≠·çç ·ã®·åì·ã∞·äõ·ãé·äï ·âµ·à≠·çç ·à≥·ã≠·äê·ä´ ·â†·â∞·äì·å†·àç ·ä®·ä©·â£·äï·ã´·ãç ·ã®·àö·à∞·å• ·äê·ãç·ç¢</p>
            </div>

        </div>

        <div class="bottom-navbar">
            <button id="nav-home" class="nav-active">Home</button>
            <button id="nav-investment">Investment</button>
            <button id="nav-account">·ã®·äî ·àò·àà·ã´</button>
            <button id="nav-team">My Team</button>
        </div>

    </div>
    
    <div id="admin-dashboard-area" class="admin-dashboard-page">
        <div class="admin-header">
            <h2>üîê Admin Panel</h2>
            <p>·ã®·â∞·å†·âÉ·àö·ãé·âΩ·äï Deposit ·ä•·äì Withdraw ·å•·ã´·âÑ·ãé·âΩ ·ä•·ãö·àÖ ·ã´·à®·åã·åç·å°·ç¢</p>
        </div>

        <div class="admin-transaction-list">
            <h3>üìë ·â†·àò·å†·â£·â†·âÖ ·àã·ã≠ ·ã´·àâ ·å•·ã´·âÑ·ãé·âΩ (Pending Requests)</h3>
            <p id="admin-message" style="color: #f44336; font-weight: bold;"></p>
            <div id="pending-transactions-list">
                <p style="text-align: center; color: #555;">·àù·äï·àù ·â†·àò·å†·â£·â†·âÖ ·àã·ã≠ ·ã´·àà ·å•·ã´·âÑ ·ã®·àà·àù·ç¢</p>
            </div>
        </div>
        
        <button id="admin-logout-btn" class="admin-logout-btn">üö™ ·ä®·ä†·ãµ·àö·äï ·ãç·å£ (Logout)</button>
    </div>


    <script>
        // [ADMIN-FEATURE] ·ã®·â∞·å†·âÉ·àö·ãé·âΩ·äï ·àò·à®·åÉ ·ã®·àö·ã´·àµ·âÄ·àù·å• Array (·ä®·äê ·ä†·äï·ãµ Dummy ·â∞·å†·âÉ·àö)
        let users = [
            {
                name: "·ä†·â∂ ·â£·àà·àÄ·â•·âµ (·àô·ä®·à´)", 
                identifier: "0912345678", 
                password: "mypassword", 
                balance: 50.00,
                totalInvested: 0.00,
                referralCode: "ABC123", 
                teamSize: 0,
                transactions: [
                    { id: 'tx000', type: "Bonus", amount: 50.00, date: "2025-10-24", status: "Completed" }
                ],
                investments: [],
                lastProfitDate: new Date().toISOString().slice(0, 10) 
            }
        ];
        
        // [ADMIN-FEATURE] ·ã®·ä†·ãµ·àö·äï ·àò·à®·åÉ
        const adminCredentials = {
            identifier: 'admin',
            password: 'admin123'
        };

        // ·â†·ä†·àÅ·äë ·åä·ãú ·åà·â•·â∂ ·ã´·àà ·â∞·å†·âÉ·àö (·ãà·ã≠·àù ·ä†·ãµ·àö·äï)
        let activeUser = null; 
        let isAdmin = false; 

        // ·ã®·åà·åæ·âΩ·äï ·ãã·äì ·â¶·â≥·ãé·âΩ
        const loginRegisterArea = document.getElementById('login-register-area');
        const dashboardArea = document.getElementById('dashboard-area');
        const adminDashboardArea = document.getElementById('admin-dashboard-area'); // [ADMIN-FEATURE]

        // Dashboard ·ã®·àõ·à≥·ã´ ·ä≠·çç·àé·âΩ
        const userNameDisplay = document.getElementById('user-name'); 
        const currentBalanceDisplay = document.getElementById('current-balance'); 
        const totalInvestedDisplay = document.getElementById('total-invested-amount'); 
        const accountInfoDisplay = document.getElementById('account-info'); 
        
        // Investment ·åà·åΩ ·ä≠·çç·àé·âΩ
        const planGridList = document.getElementById('plan-grid-list');
        const purchaseFormBox = document.getElementById('purchase-form-box');
        const selectedPlanNameDisplay = document.getElementById('selected-plan-name');
        const currentBalancePurchaseDisplay = document.getElementById('current-balance-purchase');
        const planInfoDisplay = document.getElementById('plan-info-display');
        const purchaseForm = document.getElementById('purchase-form');
        const purchaseAmountInput = document.getElementById('purchase-amount');
        const purchaseFormMessage = document.getElementById('purchase-form-message');
        const backToPlansBtn = document.getElementById('back-to-plans-btn');
        const investmentListDisplay = document.getElementById('investment-list-display');
        
        // ·àÅ·àâ·äï·àù ·ã®·ä¢·äï·â®·àµ·âµ·àò·äï·âµ ·âÅ·àç·çé·âΩ·äï ·àò·àù·à®·å•
        const planButtons = document.querySelectorAll('.plan-button');
        
        // ·åä·ãú·ã´·ãä ·ã® Selected Plan Object
        let selectedPlan = null;

        // Navigation buttons
        const navHome = document.getElementById('nav-home');
        const navInvestment = document.getElementById('nav-investment');
        const navAccount = document.getElementById('nav-account');
        const navTeam = document.getElementById('nav-team');
        const allNavButtons = [navHome, navInvestment, navAccount, navTeam];

        // Content sections
        const homeContent = document.getElementById('home-content');
        const investmentContent = document.getElementById('investment-content');
        const accountContent = document.getElementById('account-content');
        const teamContent = document.getElementById('team-content');
        const allContentSections = [homeContent, investmentContent, accountContent, teamContent];

        // Home ·åà·åΩ ·äï·ãë·àµ ·ä≠·çç·àé·âΩ
        const mainHomeContentDiv = document.getElementById('main-home-content-div');
        const depositPageContentDiv = document.getElementById('deposit-page-content-div');
        const withdrawPageContentDiv = document.getElementById('withdraw-page-content-div');

        // Deposit ·âÅ·àç·çé·âΩ
        const depositBtn = document.getElementById('deposit-btn');
        const backToHomeFromDepositBtn = document.getElementById('back-to-home-from-deposit-btn');
        const depositForm = document.getElementById('deposit-form');
        const depositFormMessage = document.getElementById('deposit-form-message');
        const depositAmountInput = document.getElementById('deposit-amount');
        const transactionIdInput = document.getElementById('transaction-id');
        
        // Withdraw ·âÅ·àç·çé·âΩ ·ä•·äì ·âÖ·åΩ
        const withdrawBtn = document.getElementById('withdraw-btn');
        const backToHomeFromWithdrawBtn = document.getElementById('back-to-home-from-withdraw-btn');
        const withdrawForm = document.getElementById('withdraw-form');
        const withdrawFormMessage = document.getElementById('withdraw-form-message');
        const withdrawAmountInput = document.getElementById('withdraw-amount');
        const withdrawBankNameInput = document.getElementById('withdraw-bank-name');
        const withdrawAccountNumberInput = document.getElementById('withdraw-account-number');
        const withdrawFullNameInput = document.getElementById('withdraw-full-name');
        
        // ·ã® My Account ·âÅ·àç·çé·âΩ
        const customerServiceBtn = document.getElementById('customer-service-btn');
        const logoutBtnAccount = document.getElementById('logout-btn-account');
        const changePasswordBtn = document.getElementById('change-password-btn');
        const transactionHistoryBtn = document.getElementById('transaction-history-btn');
        const historyMessage = document.getElementById('history-message');

        // ·ã® My Team ·ä≠·çç·àé·âΩ
        const referralCodeDisplay = document.getElementById('referral-code-display');
        const referralLinkDisplay = document.getElementById('referral-link-display');
        const copyCodeBtn = document.getElementById('copy-code-btn');
        const copyLinkBtn = document.getElementById('copy-link-btn');
        const teamSizeDisplay = document.getElementById('team-size-display');

        // ·ã® Login/Register ·ä≠·çç·àé·âΩ
        const loginTab = document.getElementById('login-tab');
        const registerTab = document.getElementById('register-tab');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const loginMessage = document.getElementById('login-message');
        const registerMessage = document.getElementById('register-message');
        const goToRegisterLink = document.getElementById('go-to-register');
        const goToLoginLink = document.getElementById('go-to-login');
        
        // [ADMIN-FEATURE] Admin Panel ·ä≠·çç·àé·âΩ
        const pendingTransactionsList = document.getElementById('pending-transactions-list');
        const adminMessage = document.getElementById('admin-message');
        const adminLogoutBtn = document.getElementById('admin-logout-btn');


        // [ADMIN-FEATURE] UTILITY FUNCTION: ·ã®·àÅ·àâ·àù ·â∞·å†·âÉ·àö·ãé·âΩ Transaction ID·ãé·âΩ·äï ·ã®·àö·à∞·â†·àµ·â•
        let transactionCounter = users.length > 0 ? users.reduce((max, user) => Math.max(max, ...user.transactions.map(t => parseInt(t.id ? t.id.replace('tx', '') : 0))), 0) + 1 : 1;
        
        // [ADMIN-FEATURE] UTILITY FUNCTION: ·ä†·ã≤·àµ Transaction ID ·ã®·àö·à∞·å•
        function getNextTransactionId() {
            return 'tx' + transactionCounter++;
        }

        // ***** UTILITY FUNCTION: ·ã® Balance ·ä•·äì Investment ·àò·à®·åÉ·ãé·âΩ·äï ·ã®·àö·ã´·ãò·àù·äï ·â∞·åç·â£·à≠ *****
        function updateDashboardData() {
            if (!activeUser) return;

            // 1. ·ãï·àà·â≥·ãä ·âµ·à≠·çç ·àõ·àµ·àã·âµ
            simulateDailyProfit();

            // 2. ·å†·âÖ·àã·àã ·ä¢·äï·â®·àµ·âµ·àò·äï·âµ·äï ·ã´·à∞·àã·àç
            activeUser.totalInvested = activeUser.investments.reduce((sum, inv) => sum + inv.amount, 0);

            // 3. ·ã® Dashboard ·àõ·à≥·ã´·ãé·âΩ·äï ·ã´·ãò·àù·äì·àç
            userNameDisplay.textContent = `·ä•·äï·ä≥·äï ·ã∞·àÖ·äì ·àò·å°! ${activeUser.name}`;
            currentBalanceDisplay.textContent = activeUser.balance.toFixed(2);
            totalInvestedDisplay.textContent = activeUser.totalInvested.toFixed(2);
            currentBalancePurchaseDisplay.textContent = activeUser.balance.toFixed(2);
            
            // ·ã® Account ·åà·åΩ ·àò·à®·åÉ·äï ·ã´·ãò·àù·äì·àç
            accountInfoDisplay.textContent = `·àµ·àç·ä≠: ${activeUser.identifier} | ·àô·àâ ·àµ·àù: ${activeUser.name}`;
            
            // ·ã® Team ·åà·åΩ ·àò·à®·åÉ·äï ·ã´·ãò·àù·äì·àç
            referralCodeDisplay.textContent = activeUser.referralCode;
            referralLinkDisplay.textContent = `http://agrocheminvest.com/register?ref=${activeUser.referralCode}`;
            teamSizeDisplay.textContent = activeUser.teamSize;
        }

        // ***** ·ä†·ã≤·àµ ·â∞·åç·â£·à≠: ·ãï·àà·â≥·ãä ·âµ·à≠·çç ·àõ·àµ·àã·âµ *****
        function simulateDailyProfit() {
            if (!activeUser) return;
            
            const today = new Date();
            const lastDate = new Date(activeUser.lastProfitDate);

            // ·â†·àÅ·àà·â± ·âÄ·äì·âµ ·àò·ä´·ä®·àç ·ã´·àâ ·àç·ã©·äê·âµ·äï ·â†·âÄ·äì·âµ ·ã´·à∞·àã·àç
            const diffTime = Math.abs(today - lastDate);
            // ·ã®10 ·âÄ·äï Simulation ·åà·ã∞·â•
            let diffDays = Math.min(Math.floor(diffTime / (1000 * 60 * 60 * 24)), 10);

            if (diffDays === 0) {
                return;
            }

            let totalProfit = 0;
            let profitMessage = '';

            // ·â†·ã®·ä¢·äï·â®·àµ·âµ·àò·äï·â± ·àõ·àà·çç ·ä•·äì ·âµ·à≠·çç ·àõ·àµ·àã·âµ
            activeUser.investments.forEach(inv => {
                if (inv.daysLeft > 0) {
                    const dailyProfit = inv.amount * (inv.rate / 100);
                    let profitToAdd = dailyProfit * diffDays;
                    
                    // ·âÄ·à™ ·âÄ·äì·âµ ·ä•·äï·ã≥·ã≠·âÄ·äê·à± ·àò·âÜ·å£·å†·à≠
                    let daysToDeduct = diffDays;
                    if (inv.daysLeft < diffDays) {
                        daysToDeduct = inv.daysLeft;
                        profitToAdd = dailyProfit * daysToDeduct;
                    }

                    totalProfit += profitToAdd;
                    inv.profitEarned += profitToAdd;
                    inv.daysLeft -= daysToDeduct;

                    if (inv.daysLeft < 0) {
                        inv.daysLeft = 0;
                    }
                    profitMessage += `${inv.name}: ${profitToAdd.toFixed(2)} ETB | `;
                }
            });
            
            // [ADMIN-FEATURE] ·ã® Level 1 ·à™·çà·à´·àç ·äÆ·àö·àΩ·äï ·àõ·àµ·àã·âµ
            let referralCommission = 0;
            const level1Users = users.filter(user => user.referredBy === activeUser.identifier);

            level1Users.forEach(refUser => {
                // ·â†·â∞·åã·â£·ã° ·àã·ã≠ ·ã®·ãï·àà·â≥·ãä ·âµ·à≠·çç ·àõ·àµ·àã·âµ/·àõ·àµ·àò·à∞·àç (·àà·àò·åÄ·àò·à™·ã´ ·åä·ãú ·â•·âª)
                // ·àõ·àµ·â≥·ãà·àª: ·ã≠·àÖ recursion (·â∞·ã∞·åã·åã·àö ·å•·à™) ·ä®·â£·ãµ ·àä·àÜ·äï ·ã≠·âΩ·àã·àç·ç¢ ·àà·âÄ·àà·àà ·ä†·à∞·à´·à≠ ·ã®·â∞·åã·â£·ã°·äï ·âµ·à´·äï·ãõ·ä≠·àΩ·äï ·àò·àò·àç·ä®·âµ ·ã≠·àò·ä®·à´·àç·ç¢
                // ·àà·ãö·àÖ ·àù·à≥·àå ·åç·äï ·âÄ·å•·àé ·â£·àà·ãç ·äÆ·ãµ ·ä•·äï·ã≤·à∞·à´ ·ä•·äì·ãµ·à≠·åà·ãç
                // simulateDailyProfit(refUser); // ·àà·â∞·åã·â£·ã° ·âµ·à≠·çç ·àò·à†·à´·âµ ·ä†·àà·â†·âµ
                
                // ·ã®·â∞·åã·â£·ã°·äï ·âµ·à≠·çç ·àõ·åç·äò·âµ (·â†·â∞·åã·â£·ã° ·àã·ã≠ ·ã´·àà·ãç·äï transaction ·àõ·ã®·âµ)
                const refUserProfits = refUser.transactions.filter(t => t.type.startsWith('Profit'));
                
                if (refUserProfits.length > 0) {
                    // ·ã®·â∞·åã·â£·ã°·äï ·ã®·âÖ·à≠·â• ·åä·ãú ·âµ·à≠·çç ·àò·ãç·à∞·ãµ
                    const latestProfitTx = refUserProfits[refUserProfits.length - 1];
                    // ·ã´·åà·äò·ãç ·âµ·à≠·çç ·â†·ãõ·à¨·ãç ·âÄ·äï (·ãà·ã≠·àù ·â† Simulation ·âÄ·äï) ·àã·ã≠ ·ã®·â∞·çà·å†·à® ·ä®·àÜ·äê ·äÆ·àö·àΩ·äë·äï ·àò·ãç·à∞·ãµ
                    if (latestProfitTx.date === today.toISOString().slice(0, 10)) {
                         const profit = latestProfitTx.amount;
                         const commission = profit * 0.20; // 20% ·äÆ·àö·àΩ·äï
                         referralCommission += commission;
                         profitMessage += `Referral Commission from ${refUser.name}: ${commission.toFixed(2)} ETB | `;
                    }
                }
            });
            
            totalProfit += referralCommission;


            if (totalProfit > 0) {
                activeUser.balance += totalProfit;
                activeUser.transactions.push({ 
                    id: getNextTransactionId(), // ·ä†·ã≤·àµ ID
                    type: `Profit (${diffDays} days) & Commission`, 
                    amount: totalProfit, 
                    date: today.toISOString().slice(0, 10), 
                    status: "Completed", 
                    details: profitMessage 
                });
                // alert(`‚úÖ ·ä•·äï·ä≥·äï ·ã∞·àµ ·ä†·àà·ãé·âµ! ·ã® ${diffDays} ·âÄ·äï ·ãï·àà·â≥·ãä ·åà·â¢ (${totalProfit.toFixed(2)} ETB) ·ãà·ã∞ ·âÄ·à™ ·àÇ·à≥·â•·ãé ·åà·â¢ ·àÜ·äó·àç·ç¢`);
            }
            
            // ·ã®·à™·çà·à´·àç ·àò·å†·äï ·àõ·ãò·àò·äï
            activeUser.teamSize = level1Users.length;

            activeUser.lastProfitDate = today.toISOString().slice(0, 10);
        }
        
        // ***** UTILITY FUNCTION: ·ã® Investment ·ãù·à≠·ãù·à≠·äï ·â† Investment ·åà·åΩ ·àã·ã≠ ·ã®·àö·ã´·à≥·ã≠ ·â∞·åç·â£·à≠ *****
        function displayInvestmentList() {
            if (!activeUser || activeUser.investments.length === 0) {
                investmentListDisplay.innerHTML = '<p style="text-align: center; color: #555;">·åà·äì ·àù·äï·àù ·ä¢·äï·â®·àµ·âµ ·ä†·àã·ã∞·à®·åâ·àù·ç¢</p>';
                return;
            }

            let listHTML = '';
            activeUser.investments.forEach((inv, index) => {
                const dailyProfit = (inv.amount * inv.rate / 100).toFixed(2);
                const statusColor = inv.daysLeft > 0 ? 'green' : '#f44336';
                const statusText = inv.daysLeft > 0 ? 'Active' : 'Expired';
                
                listHTML += `
                    <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; border-radius: 8px; background-color: #f7f7f7;">
                        <p style="margin: 0;"><strong>${inv.name} Plan - ${inv.amount.toFixed(2)} ETB</strong></p>
                        <p style="margin: 3px 0; font-size: 14px;">
                            <span style="color: #387c38;">·ãï·àà·â≥·ãä ·âµ·à≠·çç: ${dailyProfit} ETB (${inv.rate}%)</span> | ·ã®·â∞·åà·äò ·å†·âÖ·àã·àã ·âµ·à≠·çç: ${inv.profitEarned.toFixed(2)} ETB
                        </p>
                        <p style="margin: 3px 0; font-size: 12px; color: #777;">
                            ·ã®·àö·âÜ·ã≠·â†·âµ ·âÄ·äì·âµ: <span style="font-weight: bold;">${inv.daysLeft} ·âÄ·äì·âµ ·ã≠·âÄ·à´·àâ</span> | ·àÅ·äî·â≥: <span style="font-weight: bold; color: ${statusColor};">${statusText}</span>
                        </p>
                    </div>
                `;
            });
            investmentListDisplay.innerHTML = listHTML;
        }


        // ***** UTILITY FUNCTION: Login/Register Tab ·àò·âÄ·ã´·ã®·à≠·ã´ *****
        function switchAuthTab(tabName) {
            loginTab.classList.remove('active');
            registerTab.classList.remove('active');
            loginForm.classList.remove('active');
            registerForm.classList.remove('active');
            
            // ·àò·àç·ãï·ä≠·â∂·âΩ·äï ·â£·ã∂ ·àõ·ãµ·à®·åç
            loginMessage.textContent = '';
            registerMessage.textContent = '';

            if (tabName === 'login') {
                loginTab.classList.add('active');
                loginForm.classList.add('active');
            } else if (tabName === 'register') {
                registerTab.classList.add('active');
                registerForm.classList.add('active');
            }
        }

        // ***** 2. Dashboard ·åà·åΩ ·ã®·àò·âÄ·ã´·ã®·à≠ ·â∞·åç·â£·à≠ *****
        function switchDashboardPage(pageId) {
            // ·àÅ·àâ·äï·àù ·ã≠·ã∞·â•·âÉ·àç
            allContentSections.forEach(section => section.classList.remove('active'));
            allNavButtons.forEach(button => button.classList.remove('nav-active'));
            
            // Deposit ·ä•·äì Withdraw ·âÖ·åæ·âΩ·äï ·ã≠·ã∞·â•·âÉ·àç
            mainHomeContentDiv.style.display = 'block';
            depositPageContentDiv.style.display = 'none';
            withdrawPageContentDiv.style.display = 'none';
            depositFormMessage.textContent = '';
            withdrawFormMessage.textContent = '';
            depositForm.reset();
            withdrawForm.reset();
            
            // ·ã® Account ·åà·åΩ ·àã·ã≠ ·ã´·àà·ãç·äï History Message ·ã≠·ã∞·â•·âÉ·àç
            historyMessage.textContent = '';
            
            // Investment Plan Purchase Form ·ã≠·ã∞·â•·âÉ·àç
            purchaseFormBox.style.display = 'none';
            planGridList.style.display = 'flex';
            
            let targetContent;
            let targetNav;

            switch (pageId) {
                case 'home':
                    targetContent = homeContent;
                    targetNav = navHome;
                    break;
                case 'investment':
                    targetContent = investmentContent;
                    targetNav = navInvestment;
                    displayInvestmentList(); // ·ã® Investment ·ãù·à≠·ãù·à≠·äï ·ã´·ãò·àù·äì·àç
                    break;
                case 'account':
                    targetContent = accountContent;
                    targetNav = navAccount;
                    break;
                case 'team':
                    targetContent = teamContent;
                    targetNav = navTeam;
                    break;
            }

            if (targetContent) {
                targetContent.classList.add('active');
                if (targetNav) {
                    targetNav.classList.add('nav-active');
                }
                updateDashboardData(); // ·ã®·åà·åπ·äï ·ã≥·â≥ ·ã´·ãò·àù·äì·àç
            }
        }


        // ***** 3. Login ·ä†·ã´·ã´·ãù *****
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const identifier = document.getElementById('login-identifier').value.trim();
            const password = document.getElementById('login-password').value.trim();
            
            loginMessage.textContent = '';
            loginMessage.classList.remove('success', 'error');

            // [ADMIN-FEATURE] Admin Login
            if (identifier === adminCredentials.identifier && password === adminCredentials.password) {
                isAdmin = true;
                activeUser = null;
                loginRegisterArea.style.display = 'none';
                dashboardArea.style.display = 'none';
                adminDashboardArea.style.display = 'block'; // Admin Dashboard ·ä†·à≥·ã≠
                displayPendingTransactions(); // ·ã® Admin Transaction ·ãù·à≠·ãù·à≠ ·ã´·à≥·ã´·àç
                return;
            }


            // User Login
            const user = users.find(u => u.identifier === identifier && u.password === password);

            if (user) {
                activeUser = user;
                isAdmin = false;
                loginMessage.textContent = '‚úÖ ·â†·â∞·à≥·ä´ ·àÅ·äî·â≥ ·åà·â•·â∞·ãã·àç!';
                loginMessage.classList.add('success');

                setTimeout(() => {
                    loginRegisterArea.style.display = 'none';
                    dashboardArea.style.display = 'block';
                    adminDashboardArea.style.display = 'none'; // Admin Dashboard ·ã≠·ã∞·â•·âÉ·àç
                    updateDashboardData(); // ·ã≥·àΩ·â¶·à≠·ã±·äï ·â†·àò·à®·åÉ ·ã´·ãò·àù·äì·àç
                    switchDashboardPage('home'); // ·ãà·ã∞ Home ·åà·åΩ ·ã≠·ãà·àµ·ã≥·àç
                    loginForm.reset();
                }, 1000);
                
            } else {
                loginMessage.textContent = '‚ö†Ô∏è ·àµ·àç·ä≠ ·âÅ·å•·à≠ ·ãà·ã≠·àù ·ã®·ã≠·àà·çç ·âÉ·àç ·ã®·â∞·à≥·à≥·â∞ ·äê·ãç!';
                loginMessage.classList.add('error');
            }
        });

        // ***** 4. Register ·ä†·ã´·ã´·ãù *****
        registerForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('register-name').value.trim();
            const phone = document.getElementById('register-phone').value.trim();
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const referralCode = document.getElementById('register-referral').value.trim();

            registerMessage.textContent = '';
            registerMessage.classList.remove('success', 'error');

            if (password !== confirmPassword) {
                registerMessage.textContent = '‚ö†Ô∏è ·ã®·ã≠·àà·çç ·âÉ·àé·âπ ·ä†·ã≠·àò·à≥·à∞·àâ·àù!';
                registerMessage.classList.add('error');
                return;
            }
            
            if (users.some(u => u.identifier === phone)) {
                registerMessage.textContent = '‚ö†Ô∏è ·ã≠·ä∏·ãç ·àµ·àç·ä≠ ·âÅ·å•·à≠ ·âÄ·ã∞·àù ·â•·àé ·â∞·àò·ãù·åç·âß·àç·ç¢ Login ·ã´·ãµ·à≠·åâ·ç¢';
                registerMessage.classList.add('error');
                return;
            }
            
            // ·ã®·à™·çà·à´·àç ·äÆ·ã±·äï ·àõ·à®·åã·åà·å´ (·ä´·àµ·çà·àà·åà)
            let referredBy = null;
            if (referralCode) {
                const referringUser = users.find(u => u.referralCode === referralCode);
                if (referringUser) {
                    referredBy = referringUser.identifier;
                } else {
                    registerMessage.textContent = '‚ö†Ô∏è ·ã®·à™·çà·à´·àç ·äÆ·ã± ·ã®·â∞·à≥·à≥·â∞ ·äê·ãç!';
                    registerMessage.classList.add('error');
                    return;
                }
            }
            
            const newUser = {
                name: name,
                identifier: phone,
                password: password,
                balance: 50.00, // 50 ETB Bonus
                totalInvested: 0.00,
                referralCode: generateReferralCode(phone),
                teamSize: 0,
                transactions: [
                    { id: getNextTransactionId(), type: "Signup Bonus", amount: 50.00, date: new Date().toISOString().slice(0, 10), status: "Completed" }
                ],
                investments: [],
                referredBy: referredBy, // ·à™·çà·à≠ ·ã´·ã∞·à®·åà·ãç ·à∞·ãç ID
                lastProfitDate: new Date().toISOString().slice(0, 10) 
            };

            users.push(newUser);
            
            // ·ã®·à™·çà·à´·àç ·â¶·äê·àµ ·àò·àµ·å†·âµ (·â†·äã·àã Deposit ·à≤·åà·â£ ·äê·ãç ·ã®·àö·à∞·å†·ãç - ·àà·åä·ãú·ãç ·âÄ·å•·â≥ ·â¶·äê·àµ ·ã®·àà·àù)
            if (referredBy) {
                const referrer = users.find(u => u.identifier === referredBy);
                if (referrer) {
                     // ·àà·åä·ãú·ãç ·âÄ·å•·â≥ ·â¶·äê·àµ ·ã®·àà·àù - Deposit ·à≤·åà·â£ ·äê·ãç 80 ETB ·ã®·àö·à∞·å†·ãç
                }
            }


            registerMessage.textContent = '‚úÖ ·â†·â∞·à≥·ä´ ·àÅ·äî·â≥ ·â∞·àò·ãù·åç·â†·ãã·àç! ·ãà·ã∞ Login ·åà·åΩ ·ã≠·àÇ·ã±·ç¢';
            registerMessage.classList.add('success');
            registerForm.reset();
            
            // ·ä®·â∞·àò·ãò·åà·â° ·â†·äã·àã ·ãà·ã∞ Login ·åà·åΩ ·ä•·äï·ã≤·àÑ·ã±
            setTimeout(() => {
                switchAuthTab('login');
            }, 2000);
        });

        // ***** 5. Utility: Referral Code Generator *****
        function generateReferralCode(phone) {
            // ·ã®·àµ·àç·ä©·äï ·ã®·àò·å®·à®·àª 4 ·âÅ·å•·àÆ·âΩ + ·ã®·àò·åÄ·àò·à™·ã´·ãé·âπ·äï ·çä·ã∞·àã·âµ ·àò·å†·âÄ·àù
            const lastFour = phone.slice(-4);
            const prefix = activeUser ? activeUser.name.substring(0, 2).toUpperCase() : 'AG';
            return prefix + lastFour;
        }


        // ***** 6. Deposit ·ä†·ã´·ã´·ãù *****
        depositBtn.addEventListener('click', () => {
            mainHomeContentDiv.style.display = 'none';
            depositPageContentDiv.style.display = 'block';
            withdrawPageContentDiv.style.display = 'none';
            depositFormMessage.textContent = '';
            depositForm.reset();
        });

        backToHomeFromDepositBtn.addEventListener('click', () => {
            mainHomeContentDiv.style.display = 'block';
            depositPageContentDiv.style.display = 'none';
            depositFormMessage.textContent = '';
        });

        depositForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const amount = parseFloat(depositAmountInput.value);
            const txId = transactionIdInput.value.trim();

            depositFormMessage.textContent = '';
            depositFormMessage.classList.remove('success', 'error');
            
            if (amount < 500) {
                depositFormMessage.textContent = '‚ö†Ô∏è ·ã®·åà·â£·ãç ·àò·å†·äï ·ä®·ãù·âÖ·â∞·äõ·ãç ·ã® 500 ETB ·åà·ã∞·â• ·ã´·äê·à∞ ·äê·ãç·ç¢';
                depositFormMessage.classList.add('error');
                return;
            }
            
            // [ADMIN-FEATURE] Transaction ID ·â∞·å†·âÖ·àû Deposit ·àò·äñ·à©·äï ·âº·ä≠ ·àõ·ãµ·à®·åç (·ä†·àÅ·äï ·àà Simulation ·â•·âª)
            if (txId.length < 5) {
                depositFormMessage.textContent = '‚ö†Ô∏è Transaction ID ·â¢·ã´·äï·àµ 5 ·çä·ã∞·àã·âµ ·àò·àÜ·äï ·ä†·àà·â†·âµ!';
                depositFormMessage.classList.add('error');
                return;
            }

            // ·ä†·ã≤·àµ Transaction ·àò·çç·å†·à≠
            const newTx = {
                id: txId, 
                type: "Deposit", 
                amount: amount, 
                date: new Date().toISOString().slice(0, 10), 
                status: "Pending",
                user: activeUser.identifier 
            };

            // Transaction ID ·âÄ·ã∞·àù ·â•·àé ·â†·àå·àã ·à∞·ãç ·â∞·àò·ãù·åç·â¶ ·ä•·äï·ã∞·àÜ·äê ·âº·ä≠ ·àõ·ãµ·à®·åç
            const isTxIdUsed = users.some(user => user.transactions.some(t => t.id === txId && t.type === "Deposit" && t.status === "Completed"));
            if (isTxIdUsed) {
                depositFormMessage.textContent = '‚ö†Ô∏è ·ã≠·àÖ Transaction ID ·âÄ·ã∞·àù ·â•·àé ·å•·âÖ·àù ·àã·ã≠ ·ãç·àè·àç!';
                depositFormMessage.classList.add('error');
                return;
            }

            activeUser.transactions.push(newTx);

            depositFormMessage.textContent = `‚úÖ ·ã® ${amount.toFixed(2)} ETB Deposit ·å•·ã´·âÑ·ãé ·â†·â∞·à≥·ä´ ·àÅ·äî·â≥ ·åà·â•·â∑·àç·ç¢ ·ä•·â£·ä≠·ãé·äï ·ã®·ä†·ãµ·àö·äï ·àõ·à®·åã·åà·å´ ·ã≠·å†·â•·âÅ·ç¢`;
            depositFormMessage.classList.add('success');
            
            // ·âÖ·åπ·äï ·â£·ã∂ ·àõ·ãµ·à®·åç
            depositForm.reset();

            // ·ã® Admin Dashboard·äï ·àõ·ãò·àò·äï (·ä†·ãµ·àö·äï ·åà·â•·â∂ ·ä®·àÜ·äê)
            if (isAdmin) {
                displayPendingTransactions();
            }
        });

        // ***** 7. Withdraw ·ä†·ã´·ã´·ãù *****
        withdrawBtn.addEventListener('click', () => {
            mainHomeContentDiv.style.display = 'none';
            depositPageContentDiv.style.display = 'none';
            withdrawPageContentDiv.style.display = 'block';
            withdrawFormMessage.textContent = '';
            withdrawForm.reset();
        });

        backToHomeFromWithdrawBtn.addEventListener('click', () => {
            mainHomeContentDiv.style.display = 'block';
            withdrawPageContentDiv.style.display = 'none';
            withdrawFormMessage.textContent = '';
        });

        withdrawForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const amount = parseFloat(withdrawAmountInput.value);
            const bankName = withdrawBankNameInput.value;
            const accountNumber = withdrawAccountNumberInput.value.trim();
            const fullName = withdrawFullNameInput.value.trim();

            withdrawFormMessage.textContent = '';
            withdrawFormMessage.classList.remove('success', 'error');

            if (amount < 100) {
                withdrawFormMessage.textContent = '‚ö†Ô∏è ·ã®·åà·â£·ãç ·àò·å†·äï ·ä®·ãù·âÖ·â∞·äõ·ãç ·ã® 100 ETB ·åà·ã∞·â• ·ã´·äê·à∞ ·äê·ãç·ç¢';
                withdrawFormMessage.classList.add('error');
                return;
            }

            if (amount > activeUser.balance) {
                withdrawFormMessage.textContent = `‚ö†Ô∏è ·â†·âÇ ·âÄ·à™ ·àÇ·à≥·â• (${activeUser.balance.toFixed(2)} ETB) ·ã®·àé·âµ·àù·ç¢`;
                withdrawFormMessage.classList.add('error');
                return;
            }
            
            // ·ä†·ã≤·àµ Transaction ·àò·çç·å†·à≠
            const newTx = {
                id: getNextTransactionId(), 
                type: "Withdraw", 
                amount: amount, 
                date: new Date().toISOString().slice(0, 10), 
                status: "Pending",
                user: activeUser.identifier,
                bank: bankName,
                account: accountNumber,
                name: fullName
            };
            
            // ·âÄ·à™ ·àÇ·à≥·â•·äï ·àò·âÄ·äê·àµ (·â†·åä·ãú·ã´·ãä·äê·âµ)
            activeUser.balance -= amount;
            activeUser.transactions.push(newTx);
            updateDashboardData(); // ·ã® Balance ·àõ·à≥·ã´·ãç·äï ·ã´·ãò·àù·äì·àç

            withdrawFormMessage.textContent = `‚úÖ ·ã® ${amount.toFixed(2)} ETB Withdraw ·å•·ã´·âÑ·ãé ·â†·â∞·à≥·ä´ ·àÅ·äî·â≥ ·åà·â•·â∑·àç·ç¢ ·ä•·â£·ä≠·ãé·äï ·ã®·ä†·ãµ·àö·äï ·àõ·à®·åã·åà·å´ ·ã≠·å†·â•·âÅ·ç¢`;
            withdrawFormMessage.classList.add('success');
            
            // ·âÖ·åπ·äï ·â£·ã∂ ·àõ·ãµ·à®·åç
            withdrawForm.reset();
            
            // ·ã® Admin Dashboard·äï ·àõ·ãò·àò·äï (·ä†·ãµ·àö·äï ·åà·â•·â∂ ·ä®·àÜ·äê)
            if (isAdmin) {
                displayPendingTransactions();
            }
        });


        // ***** 8. Investment ·ä†·ã´·ã´·ãù *****
        planButtons.forEach(button => {
            button.addEventListener('click', function() {
                // ·ã® Selected Plan ·àò·à®·åÉ ·àõ·ãç·å£·âµ
                selectedPlan = {
                    name: this.getAttribute('data-plan'),
                    min: parseInt(this.getAttribute('data-min')),
                    max: parseInt(this.getAttribute('data-max')),
                    rate: parseInt(this.getAttribute('data-rate')),
                    days: parseInt(this.getAttribute('data-days'))
                };

                // ·ã®·àõ·à≥·ã´ ·ä≠·çç·àé·âΩ·äï ·àõ·ãò·àò·äï
                selectedPlanNameDisplay.textContent = selectedPlan.name;
                planInfoDisplay.textContent = `·àò·å†·äï: ${selectedPlan.min} - ${selectedPlan.max} ETB | ·ãï·àà·â≥·ãä ·âµ·à≠·çç: ${selectedPlan.rate}% | ·àà ${selectedPlan.days} ·âÄ·äì·âµ`;
                purchaseAmountInput.min = selectedPlan.min;
                purchaseAmountInput.max = selectedPlan.max;
                purchaseAmountInput.value = selectedPlan.min; // ·ãù·âÖ·â∞·äõ·ãç·äï ·àò·å†·äï ·â† Default ·àõ·àµ·âÄ·àò·å•
                purchaseFormMessage.textContent = '';

                // ·âÖ·åæ·âΩ·äï ·àõ·à≥·ã®·âµ
                planGridList.style.display = 'none';
                purchaseFormBox.style.display = 'block';
                
            });
        });

        backToPlansBtn.addEventListener('click', () => {
            purchaseFormBox.style.display = 'none';
            planGridList.style.display = 'flex';
            selectedPlan = null;
        });

        purchaseForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const amount = parseFloat(purchaseAmountInput.value);

            purchaseFormMessage.textContent = '';
            purchaseFormMessage.classList.remove('success', 'error');

            if (!selectedPlan) {
                purchaseFormMessage.textContent = '‚ö†Ô∏è ·ä•·â£·ä≠·ãé·äï ·ã®·ä¢·äï·â®·àµ·âµ·àò·äï·âµ ·ãï·âÖ·ãµ ·ã≠·àù·à®·å°·ç¢';
                purchaseFormMessage.classList.add('error');
                return;
            }

            // ·ã®·åà·äï·ãò·â• ·àò·å†·äï ·àõ·à®·åã·åà·å´
            if (amount < selectedPlan.min || amount > selectedPlan.max) {
                purchaseFormMessage.textContent = `‚ö†Ô∏è ·ã®·åà·â£·ãç ·àò·å†·äï ·àà ${selectedPlan.name} ·ãï·âÖ·ãµ ·âµ·ä≠·ä≠·àà·äõ ·ä†·ã≠·ã∞·àà·àù (${selectedPlan.min} - ${selectedPlan.max} ETB)·ç¢`;
                purchaseFormMessage.classList.add('error');
                return;
            }
            
            // ·â†·âÇ ·âÄ·à™ ·àÇ·à≥·â• ·àõ·à®·åã·åà·å´
            if (amount > activeUser.balance) {
                purchaseFormMessage.textContent = `‚ö†Ô∏è ·â†·âÇ ·âÄ·à™ ·àÇ·à≥·â• (${activeUser.balance.toFixed(2)} ETB) ·ã®·àé·âµ·àù·ç¢`;
                purchaseFormMessage.classList.add('error');
                return;
            }
            
            // ·ä†·ã≤·àµ Investment ·àò·çç·å†·à≠
            const newInvestment = {
                id: getNextTransactionId(), 
                name: selectedPlan.name, 
                amount: amount, 
                rate: selectedPlan.rate, 
                daysTotal: selectedPlan.days,
                daysLeft: selectedPlan.days,
                profitEarned: 0.00,
                startDate: new Date().toISOString().slice(0, 10)
            };
            
            // ·âÄ·à™ ·àÇ·à≥·â•·äï ·àò·âÄ·äê·àµ
            activeUser.balance -= amount;
            
            // Investment ·àò·àò·ãù·åà·â•
            activeUser.investments.push(newInvestment);
            
            // Transaction ·àò·àò·ãù·åà·â•
            activeUser.transactions.push({
                id: getNextTransactionId(), 
                type: `Investment: ${selectedPlan.name}`, 
                amount: -amount, // ·ãà·å™ ·àµ·àà·àÜ·äê ·à≤·âÄ·äê·àµ
                date: new Date().toISOString().slice(0, 10), 
                status: "Completed"
            });
            
            updateDashboardData(); // ·ã® Balance ·ã´·ãò·àù·äì·àç
            displayInvestmentList(); // ·ã® Investment ·ãù·à≠·ãù·à≠ ·ã´·ãò·àù·äì·àç

            purchaseFormMessage.textContent = `‚úÖ ·ã® ${amount.toFixed(2)} ETB ·ä¢·äï·â®·àµ·âµ·àò·äï·âµ ·â† ${selectedPlan.name} ·ãï·âÖ·ãµ ·â†·â∞·à≥·ä´ ·àÅ·äî·â≥ ·åà·â•·â∑·àç·ç¢ ·àò·àç·ä´·àù ·âµ·à≠·çç!`;
            purchaseFormMessage.classList.add('success');
            
            // ·çé·à≠·àô·äï ·â£·ã∂ ·àõ·ãµ·à®·åç
            purchaseForm.reset();
            
            // [ADMIN-FEATURE] ·ã®·à™·çà·à´·àç ·â¶·äê·àµ ·àò·àµ·å†·âµ (·â†·àò·åÄ·àò·à™·ã´·ãç ·ä´·çí·â≥·àç ·ä¢·äï·â®·àµ·âµ·àò·äï·âµ)
            if (activeUser.referredBy) {
                const referrer = users.find(u => u.identifier === activeUser.referredBy);
                // ·à∞·ãç·ã®·ãç ·ä®·ãö·àÖ ·â†·çä·âµ ·ä¢·äï·â®·àµ·âµ ·ä†·ãµ·à≠·åé ·ä®·àÜ·äê 80 ETB ·â¶·äê·àµ ·ä†·ã≠·à∞·å•·àù (·â†·ãö·àÖ ·àù·à≥·àå)
                const alreadyInvested = activeUser.investments.length > 1;
                
                if (referrer && !alreadyInvested) {
                    const bonusAmount = 80.00;
                    referrer.balance += bonusAmount;
                    referrer.transactions.push({
                        id: getNextTransactionId(), 
                        type: "Referral Bonus (L1)", 
                        amount: bonusAmount, 
                        date: new Date().toISOString().slice(0, 10), 
                        status: "Completed",
                        details: `from ${activeUser.name} (${activeUser.identifier}) first investment`
                    });
                    
                    // alert(`üéâ ·àà·à™·çà·à´·àç·ãé ·àù·àµ·åã·äì ·ã≠·åç·â£·ãç·äì ${referrer.name}·ç£ ${bonusAmount.toFixed(2)} ETB ·åà·â¢ ·â∞·ã∞·à≠·åé·àç·ãé·â≥·àç·ç¢`);
                }
            }
            
            // ·àà·âµ·äï·àΩ ·åä·ãú ·âÜ·ã≠·â∂ ·ãà·ã∞ ·ãï·âÖ·ãµ ·ãù·à≠·ãù·à≠ ·àò·àò·àà·àµ
            setTimeout(() => {
                purchaseFormBox.style.display = 'none';
                planGridList.style.display = 'flex';
                selectedPlan = null;
            }, 3000);
        });


        // ***** 9. Account ·åà·åΩ ·â∞·åç·â£·à´·âµ *****
        // A. ·ã®·ã≠·àà·çç ·âÉ·àç ·âÄ·ã≠·à≠
        changePasswordBtn.addEventListener('click', () => {
            if (!activeUser) return;
            
            let oldPassword;
            let newPassword;
            let confirmPassword;
            let attempts = 0;
            
            while (attempts < 3) {
                // 1. ·ã®·ãµ·àÆ ·ã®·ã≠·àà·çç ·âÉ·àç ·àò·å†·ã®·âÖ
                oldPassword = prompt("·ã®·ãµ·àÆ ·ã®·ã≠·àà·çç ·âÉ·àç·ãé·äï ·ã´·àµ·åà·â°:");
                
                if (oldPassword === null) {
                    alert("·ã®·ã≠·àà·çç ·âÉ·àç ·àò·âÄ·ã®·à≠ ·â∞·âã·à≠·åß·àç·ç¢");
                    return;
                }
                
                if (oldPassword !== activeUser.password) {
                    alert("·ã®·â∞·à≥·à≥·â∞ ·ã®·ã≠·àà·çç ·âÉ·àç! ·ä•·äï·ã∞·åà·äì ·ã≠·àû·ä≠·à©·ç¢");
                    attempts++;
                    continue; 
                }
                
                // 2. ·ä†·ã≤·àµ ·ã®·ã≠·àà·çç ·âÉ·àç ·àò·å†·ã®·âÖ
                newPassword = prompt("·ä†·ã≤·à±·äï ·ã®·ã≠·àà·çç ·âÉ·àç·ãé·äï ·ã´·àµ·åà·â° (·â¢·ã´·äï·àµ 6 ·çä·ã∞·àç):");

                if (newPassword === null) {
                    alert("·ã®·ã≠·àà·çç ·âÉ·àç ·àò·âÄ·ã®·à≠ ·â∞·âã·à≠·åß·àç·ç¢");
                    return;
                }
                
                if (newPassword.length < 6) {
                    alert("·ã®·ã≠·àà·çç ·âÉ·àç·ãé ·â¢·ã´·äï·àµ 6 ·çä·ã∞·àã·âµ ·àò·àÜ·äï ·ä†·àà·â†·âµ·ç¢");
                    attempts++;
                    continue; 
                }
                
                if (newPassword === oldPassword) {
                     alert("·ä†·ã≤·à± ·ã®·ã≠·àà·çç ·âÉ·àç·ãé ·ä®·ãµ·àÆ·ãç ·ã®·ã≠·àà·çç ·âÉ·àç ·åã·à≠ ·àò·àò·à≥·à∞·àç ·ã®·àà·â†·âµ·àù·ç¢");
                     attempts++;
                     continue;
                }
                
                // 3. ·àõ·à®·åã·åà·å´ ·àò·å†·ã®·âÖ
                confirmPassword = prompt("·ä†·ã≤·à±·äï ·ã®·ã≠·àà·çç ·âÉ·àç·ãé·äï ·ä•·äï·ã∞·åà·äì ·â†·àõ·àµ·åà·â£·âµ ·ã´·à®·åã·åç·å°:");
                
                if (confirmPassword === null) {
                    alert("·ã®·ã≠·àà·çç ·âÉ·àç ·àò·âÄ·ã®·à≠ ·â∞·âã·à≠·åß·àç·ç¢");
                    return;
                }

                if (newPassword === confirmPassword) {
                    activeUser.password = newPassword;
                    alert("‚úÖ ·ã®·ã≠·àà·çç ·âÉ·àç·ãé ·â†·â∞·à≥·ä´ ·àÅ·äî·â≥ ·â∞·âÄ·ã≠·àØ·àç·ç¢ ·ä†·ã≤·à±·äï ·ã≠·àà·çç ·âÉ·àç ·â†·àò·å†·âÄ·àù ·ãà·ã∞·çä·âµ ·ã≠·åç·â°·ç¢");
                    return;
                } else {
                    alert("·ã®·ã≠·àà·çç ·âÉ·àé·âπ ·ä†·ã≠·àò·à≥·à∞·àâ·àù! ·ä•·äï·ã∞·åà·äì ·ã≠·àû·ä≠·à©·ç¢");
                    attempts++;
                }
            }
            
            alert("‚ö†Ô∏è ·ã®·ã≠·àà·çç ·âÉ·àç·ãé·äï ·â†·â∞·ã∞·åã·åã·àö ·àò·àà·ãà·å• ·ä†·àç·âª·àâ·àù·ç¢ ·â†·äã·àã ·ã≠·àû·ä≠·à©·ç¢");
        });

        // B. ·ã®·ãù·ãç·ãç·à≠ ·â≥·à™·ä≠ (Transaction History) ·ä†·à≥·ã≠
        transactionHistoryBtn.addEventListener('click', () => {
            if (!activeUser) return;
            
            let historyHTML = '<h4>·ã®·ãù·ãç·ãç·à≠ ·â≥·à™·ä≠</h4>';
            
            // ·ã®·âÖ·à≠·â• ·åä·ãú·ãé·âπ·äï 15 ·åç·â•·ã≠·â∂·âΩ ·â•·âª ·àõ·à≥·ã®·âµ
            const recentTransactions = activeUser.transactions.slice(-15).reverse();

            if (recentTransactions.length === 0) {
                historyHTML += '<p style="text-align: center; color: #555;">·àù·äï·àù ·ã®·ãù·ãç·ãç·à≠ ·â≥·à™·ä≠ ·ã®·àé·âµ·àù·ç¢</p>';
            } else {
                historyHTML += '<ul style="list-style: none; padding: 0;">';
                recentTransactions.forEach(tx => {
                    const amountClass = tx.amount >= 0 ? 'status-Completed' : 'status-Rejected'; // ·àà Withdraw/Investment ·âÄ·ã≠ ·àò·å†·âÄ·àù ·ã≠·âª·àã·àç
                    const sign = tx.amount >= 0 ? '+' : '';
                    
                    historyHTML += `
                        <li style="border-bottom: 1px dashed #eee; padding: 10px 0;">
                            <strong>${tx.type}</strong> (${tx.date}): 
                            <span class="${amountClass}" style="float: right;">${sign}${tx.amount.toFixed(2)} ETB</span>
                            <small style="display: block; color: #999;">ID: ${tx.id} | ·àÅ·äî·â≥: ${tx.status}</small>
                        </li>
                    `;
                });
                historyHTML += '</ul>';
            }
            
            historyMessage.innerHTML = historyHTML;
        });

        // C. Customer Service ·àõ·àµ·â∞·ä´·ä®·ã´
        customerServiceBtn.addEventListener('click', () => {
            // ·â∞·å†·âÉ·àö·ãç·äï ·â†·âÄ·å•·â≥ ·ãà·ã∞ ·â¥·àå·åç·à´·àù ·ã©·ãò·à≠·äî·àù @Lucia_ipo ·ã≠·ãà·àµ·ã≥·àç
            const telegramUsername = 'Lucia_ipo';
            window.open(`https://t.me/${telegramUsername}`, '_blank');
        });

        // D. Logout
        function logout() {
            activeUser = null;
            isAdmin = false;
            loginRegisterArea.style.display = 'flex';
            dashboardArea.style.display = 'none';
            adminDashboardArea.style.display = 'none';
            loginForm.reset();
            switchAuthTab('login');
        }

        logoutBtnAccount.addEventListener('click', logout);
        adminLogoutBtn.addEventListener('click', logout);

        
        // ***** 10. My Team ·åà·åΩ ·â∞·åç·â£·à´·âµ *****
        copyCodeBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(referralCodeDisplay.textContent).then(() => {
                alert('‚úÖ Referral Code ·â†·â∞·à≥·ä´ ·àÅ·äî·â≥ ·â∞·âÄ·ãµ·â∑·àç·ç¢');
            }, () => {
                alert('‚ö†Ô∏è Referral Code ·àò·âÖ·ã≥·âµ ·ä†·àç·â∞·âª·àà·àù·ç¢ ·â†·ä•·åÖ ·ã≠·âÖ·ã±·âµ·ç¢');
            });
        });

        copyLinkBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(referralLinkDisplay.textContent).then(() => {
                alert('‚úÖ ·ã®·àò·àò·ãù·åà·â¢·ã´ ·àä·äï·ä≠ ·â†·â∞·à≥·ä´ ·àÅ·äî·â≥ ·â∞·âÄ·ãµ·â∑·àç·ç¢');
            }, () => {
                alert('‚ö†Ô∏è ·ã®·àò·àò·ãù·åà·â¢·ã´ ·àä·äï·ä≠ ·àò·âÖ·ã≥·âµ ·ä†·àç·â∞·âª·àà·àù·ç¢ ·â†·ä•·åÖ ·ã≠·âÖ·ã±·âµ·ç¢');
            });
        });


        // ***** 11. Event Listeners ·àà Navigation *****
        navHome.addEventListener('click', () => switchDashboardPage('home'));
        navInvestment.addEventListener('click', () => switchDashboardPage('investment'));
        navAccount.addEventListener('click', () => switchDashboardPage('account'));
        navTeam.addEventListener('click', () => switchDashboardPage('team'));
        
        // Login/Register Link Clicks
        goToRegisterLink.addEventListener('click', (e) => { e.preventDefault(); switchAuthTab('register'); });
        goToLoginLink.addEventListener('click', (e) => { e.preventDefault(); switchAuthTab('login'); });
        loginTab.addEventListener('click', () => switchAuthTab('login'));
        registerTab.addEventListener('click', () => switchAuthTab('register'));


        // ***** [ADMIN-FEATURE] 12. Admin Panel ·â∞·åç·â£·à´·âµ *****
        function getPendingTransactions() {
            let pendingTxs = [];
            users.forEach(user => {
                const userPending = user.transactions.filter(t => t.status === "Pending");
                pendingTxs = pendingTxs.concat(userPending);
            });
            return pendingTxs;
        }

        function displayPendingTransactions() {
            const pendingTxs = getPendingTransactions();
            
            if (pendingTxs.length === 0) {
                pendingTransactionsList.innerHTML = '<p style="text-align: center; color: #555;">·àù·äï·àù ·â†·àò·å†·â£·â†·âÖ ·àã·ã≠ ·ã´·àà ·å•·ã´·âÑ ·ã®·àà·àù·ç¢</p>';
                adminMessage.textContent = '‚úÖ ·àÅ·àâ·àù ·å•·ã´·âÑ·ãé·âΩ ·â∞·à®·åã·åç·å†·ãã·àç·ç¢';
                adminMessage.classList.add('success');
                adminMessage.classList.remove('error');
                return;
            }
            
            adminMessage.textContent = '‚ö†Ô∏è ·ä†·ã≤·àµ ·â†·àò·å†·â£·â†·âÖ ·àã·ã≠ ·ã´·àà ·å•·ã´·âÑ ·ä†·àà!';
            adminMessage.classList.add('error');
            adminMessage.classList.remove('success');

            let listHTML = '';
            pendingTxs.forEach(tx => {
                let details = '';
                if (tx.type === 'Deposit') {
                    details = `<p><strong>Transaction ID:</strong> ${tx.id}</p>`;
                } else if (tx.type === 'Withdraw') {
                    details = `<p><strong>Bank:</strong> ${tx.bank} | <strong>Account:</strong> ${tx.account}</p>
                               <p><strong>Name:</strong> ${tx.name}</p>`;
                }
                
                listHTML += `
                    <div class="admin-transaction-item" data-id="${tx.id}" data-user="${tx.user}" data-type="${tx.type}" data-amount="${tx.amount}">
                        <div class="admin-transaction-info">
                            <p><strong>·ãì·ã≠·äê·âµ:</strong> ${tx.type} | <strong>·àò·å†·äï:</strong> ${tx.amount.toFixed(2)} ETB</p>
                            <p><strong>·àà·â∞·å†·âÉ·àö:</strong> ${tx.user} (${users.find(u => u.identifier === tx.user).name})</p>
                            ${details}
                        </div>
                        <div class="admin-actions">
                            <button class="approve-btn" data-action="approve">‚úÖ ·ä†·åΩ·ãµ·âÖ (Approve)</button>
                            <button class="reject-btn" data-action="reject">‚ùå ·ãç·ãµ·âÖ (Reject)</button>
                        </div>
                    </div>
                `;
            });
            pendingTransactionsList.innerHTML = listHTML;
            
            // Event Listeners ·àà Admin Buttons
            document.querySelectorAll('.admin-actions button').forEach(button => {
                button.addEventListener('click', handleAdminAction);
            });
        }

        function handleAdminAction(e) {
            if (!isAdmin) return;

            const button = e.target;
            const action = button.getAttribute('data-action');
            const itemDiv = button.closest('.admin-transaction-item');
            
            const txId = itemDiv.getAttribute('data-id');
            const userId = itemDiv.getAttribute('data-user');
            const txType = itemDiv.getAttribute('data-type');
            const txAmount = parseFloat(itemDiv.getAttribute('data-amount'));

            const user = users.find(u => u.identifier === userId);

            if (!user) {
                alert("·ã®·â∞·å†·âÉ·àö ·àò·à®·åÉ ·ä†·àç·â∞·åà·äò·àù!");
                return;
            }

            const txIndex = user.transactions.findIndex(t => t.id === txId && t.status === "Pending");
            const transaction = user.transactions[txIndex];


            if (txIndex === -1) {
                 alert("·ã≠·àÖ ·å•·ã´·âÑ ·ãà·ã≠ ·â∞·à®·åã·åç·åß·àç ·ãà·ã≠·àù ·â∞·à∞·à≠·ãü·àç·ç¢");
                 displayPendingTransactions(); // ·ãù·à≠·ãù·à©·äï ·àõ·ã∞·àµ
                 return;
            }

            if (action === 'approve') {
                transaction.status = "Completed";
                
                if (txType === 'Deposit') {
                    user.balance += txAmount;
                    alert(`‚úÖ ·ã® ${txAmount.toFixed(2)} ETB Deposit ·àà ${user.name} ·åà·â¢ ·àÜ·äó·àç·ç¢`);
                } else if (txType === 'Withdraw') {
                    // ·âÄ·à™ ·àÇ·à≥·â• ·âÖ·ãµ·àö·ã´ ·â∞·âÄ·äï·à∑·àç (·â† withdrawForm.addEventListener ·àã·ã≠)
                    alert(`‚úÖ ·ã® ${txAmount.toFixed(2)} ETB Withdraw ·àà ${user.name} ·â∞·à®·åã·åç·å¶ ·â∞·àç·ä≥·àç·ç¢`);
                }
                
            } else if (action === 'reject') {
                transaction.status = "Rejected";
                
                if (txType === 'Withdraw') {
                    // ·âÄ·ã∞·àù ·â•·àé ·ã®·â∞·âÄ·äê·à∞·ãç·äï ·åà·äï·ãò·â• ·àò·àò·àà·àµ
                    user.balance += txAmount;
                    alert(`‚ùå ·ã® ${txAmount.toFixed(2)} ETB Withdraw ·å•·ã´·âÑ ·ãç·ãµ·âÖ ·â∞·ã∞·à≠·åì·àç·ç¢ ·åà·äï·ãò·â° ·â∞·àò·àç·à∑·àç·ç¢`);
                } else if (txType === 'Deposit') {
                    alert(`‚ùå ·ã® ${txAmount.toFixed(2)} ETB Deposit ·å•·ã´·âÑ ·ãç·ãµ·âÖ ·â∞·ã∞·à≠·åì·àç·ç¢`);
                }
            }
            
            // ·ãù·à≠·ãù·à©·äï ·àõ·ã∞·àµ
            displayPendingTransactions();
            
            // ·â∞·å†·âÉ·àö·ãç ·åà·â•·â∂ ·ä®·àÜ·äê ·ã® Dashboard ·ã≥·â≥·ãç·äï ·àõ·ã∞·àµ (·àà·â∞·å†·âÉ·àö·ãç ·àõ·à≥·ã®·âµ)
            if (activeUser && activeUser.identifier === user.identifier) {
                updateDashboardData();
            }
        }


        // ***** 13. Initialization (·åà·åπ ·à≤·ä®·çà·âµ) *****
        // ·â†·åà·åΩ ·àé·ãµ ·åä·ãú ·àò·åÄ·àò·à™·ã´ Login/Register ·åà·åΩ·äï ·àõ·à≥·ã®·âµ
        loginRegisterArea.style.display = 'flex';
        dashboardArea.style.display = 'none';
        adminDashboardArea.style.display = 'none';
        purchaseFormBox.style.display = 'none'; // ·ã® Investment ·åç·ã¢ ·âÖ·åΩ·äï ·àò·ã∞·â†·âÖ
        
        // ·ã® Admin Dashboard·äï ·â†·åà·åΩ ·àé·ãµ ·åä·ãú ·âº·ä≠ ·àõ·ãµ·à®·åç
        if (isAdmin) {
             adminDashboardArea.style.display = 'block';
             loginRegisterArea.style.display = 'none';
             dashboardArea.style.display = 'none';
             displayPendingTransactions();
        }

    </script>
</body>
</html>